"use strict";(self.webpackChunkdocs_site=self.webpackChunkdocs_site||[]).push([[842],{5537:(e,n,t)=>{t.d(n,{A:()=>D});var i=t(6540),a=t(4164),l=t(5627),r=t(6347),o=t(372),s=t(604),c=t(1861),u=t(8749);function d(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:a}}=e;return{value:n,label:t,attributes:i,default:a}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function f(e){let{queryString:n=!1,groupId:t}=e;const a=(0,r.W6)(),l=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s.aZ)(l),(0,i.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(a.location.search);n.set(l,e),a.replace({...a.location,search:n.toString()})}),[l,a])]}function p(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,l=h(e),[r,s]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:l}))),[c,d]=f({queryString:t,groupId:a}),[p,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,l]=(0,u.Dv)(t);return[a,(0,i.useCallback)((e=>{t&&l.set(e)}),[t,l])]}({groupId:a}),v=(()=>{const e=c??p;return m({value:e,tabValues:l})?e:null})();(0,o.A)((()=>{v&&s(v)}),[v]);return{selectedValue:r,selectValue:(0,i.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);s(e),d(e),g(e)}),[d,g,l]),tabValues:l}}var g=t(9136);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(4848);function x(e){let{className:n,block:t,selectedValue:i,selectValue:r,tabValues:o}=e;const s=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),u=e=>{const n=e.currentTarget,t=s.indexOf(n),a=o[t].value;a!==i&&(c(n),r(a))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:o.map((e=>{let{value:n,label:t,attributes:l}=e;return(0,b.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>{s.push(e)},onKeyDown:d,onClick:u,...l,className:(0,a.A)("tabs__item",v.tabItem,l?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function C(e){let{lazy:n,children:t,selectedValue:l}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===l));return e?(0,i.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function S(e){const n=p(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",v.tabList),children:[(0,b.jsx)(x,{...n,...e}),(0,b.jsx)(C,{...n,...e})]})}function D(e){const n=(0,g.A)();return(0,b.jsx)(S,{...e,children:d(e.children)},String(n))}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var i=t(6540);const a={},l=i.createContext(a);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},8640:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Minting and Burning DSC/Minting-Redeeming","title":"Minting-Redeeming","description":"Minting and Redeeming DSC","source":"@site/docs/Minting and Burning DSC/Minting-Redeeming.md","sourceDirName":"Minting and Burning DSC","slug":"/Minting and Burning DSC/Minting-Redeeming","permalink":"/oc-stablecoin/Minting and Burning DSC/Minting-Redeeming","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"hide_title":true,"sidebar_label":"Minting and Redeeming DSC","toc_min_heading_level":2,"toc_max_heading_level":6},"sidebar":"mainSidebar","previous":{"title":"The DSC Token","permalink":"/oc-stablecoin/Minting and Burning DSC/DSC Token"},"next":{"title":"Liquidations","permalink":"/oc-stablecoin/category/Liquidations"}}');var a=t(4848),l=t(8453),r=t(5537),o=t(9329);const s={hide_title:!0,sidebar_label:"Minting and Redeeming DSC",toc_min_heading_level:2,toc_max_heading_level:6},c=void 0,u={},d=[{value:"Minting and Redeeming DSC",id:"minting-and-redeeming-dsc",level:2},{value:"Minting DSC",id:"minting-dsc",level:2},{value:"Key aspects of minting",id:"key-aspects-of-minting",level:3},{value:"Example of Over-Collateralization",id:"example-of-over-collateralization",level:4},{value:"Pre-calculation of Max Mintable DSC",id:"pre-calculation-of-max-mintable-dsc",level:4},{value:"Importance of a Safety Buffer",id:"importance-of-a-safety-buffer",level:4},{value:"Protocol Fees (Minting and Redeeming)",id:"protocol-fees-minting-and-redeeming",level:4},{value:"Helper Functions for Collateral Valuation",id:"helper-functions-for-collateral-valuation",level:4},{value:"Redeeming Collateral (Burning DSC)",id:"redeeming-collateral-burning-dsc",level:3},{value:"Key aspects of redeeming",id:"key-aspects-of-redeeming",level:4},{value:"User Interface Functions: Minting and Redeeming DSC",id:"user-interface-functions-minting-and-redeeming-dsc",level:2},{value:"Minting Functions",id:"minting-functions",level:3},{value:"Redeeming/Burning Functions",id:"redeemingburning-functions",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(r.A,{queryString:"minting-redeeming-dsc",children:[(0,a.jsxs)(o.A,{value:"mint-redeem",label:"Minting and Redeeming DSC",default:!0,children:[(0,a.jsx)(n.h2,{id:"minting-and-redeeming-dsc",children:"Minting and Redeeming DSC"}),(0,a.jsx)(n.p,{children:"The core function of the protocol involves the issuance of its ERC20 stablecoin, DSC, when users supply supported collateral. To retrieve their locked collateral, users subsequently burn an equivalent amount of DSC."}),(0,a.jsx)(n.h2,{id:"minting-dsc",children:"Minting DSC"}),(0,a.jsx)(n.p,{children:"Minting new DSC is a permissionless process, but it is always collateralized. Users must deposit crypto assets approved by the protocol (e.g., Ether, ERC20 tokens) to mint new DSC. This mechanism ensures the algorithmic and decentralized stability of DSC, which is pegged to the US Dollar."}),(0,a.jsxs)(n.p,{children:["The DSC token itself is a fully compliant ERC20 token, inheriting standard functionalities. Furthermore, it implements EIP-2612 widely known as ",(0,a.jsx)(n.a,{href:"https://eips.ethereum.org/EIPS/eip-2612",children:"ERC20Permit"}),", enabling gasless token approvals for certain interactions."]}),(0,a.jsx)(n.h3,{id:"key-aspects-of-minting",children:"Key aspects of minting"}),(0,a.jsx)(n.p,{children:"The key aspects governing the minting of DSC are:"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"Collateral Backed"}),(0,a.jsx)(n.p,{children:"Every DSC token in circulation is backed by an over-collateralized amount of approved assets."})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"DSCEngine Control"}),(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.code,{children:"DSCEngine"})," smart contract exclusively manages the minting and burning of DSC. Users interact with wrapper functions within the ",(0,a.jsx)(n.code,{children:"DSCEngine"})," to perform these actions (see [Link to Minting and Burning Interface Functions Section])"]})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"Vault Creation"}),(0,a.jsx)(n.p,{children:"Minting DSC against collateral initiates the creation of a collateral vault owned by the user."})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"Over-Collateralization Checks"}),(0,a.jsx)(n.p,{children:"Before DSC is minted, the protocol verifies that the value of the DSC requested does not exceed the allowed amount based on the deposited collateral and the collateral's over-collateralization ratio. This check is often referred to as the vault's \"health factor.\""})]}),"\n"]}),"\n"]}),(0,a.jsx)(n.h4,{id:"example-of-over-collateralization",children:"Example of Over-Collateralization"}),(0,a.jsx)(n.p,{children:"Consider a collateral type with a set over-collateralization ratio of 150%. If a user deposits $150 worth of this collateral, the maximum amount of DSC they can mint is $100 (since DSC is pegged 1:1 to USD). An attempt to mint, for example, 110 DSC against this $150 collateral would fail as it violates the 150% over-collateralization requirement."}),(0,a.jsx)(n.h4,{id:"pre-calculation-of-max-mintable-dsc",children:"Pre-calculation of Max Mintable DSC"}),(0,a.jsx)(n.p,{children:"For user convenience, especially within a user interface (UI), the maximum mintable DSC for a given collateral amount can be pre-calculated off-chain. This calculation relies on the specific collateral's configuration parameters (e.g., price feed data, over-collateralization ratio)."}),(0,a.jsx)(n.h4,{id:"importance-of-a-safety-buffer",children:"Importance of a Safety Buffer"}),(0,a.jsx)(n.p,{children:"It is strongly advisable that users do not mint the maximum allowable DSC against their collateral vaults. Minting at the very edge of the over-collateralization ratio leaves the vault vulnerable to liquidation in the event of even minor price fluctuations in the collateral asset. Established DeFi protocols like MakerDAO recommend maintaining a significant buffer to safeguard against such risks."}),(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example of a Safety Buffer"})}),(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"For instance, if the maximum mintable DSC for a $150 Ether collateral (at 150% over-collateralization) is 100 DSC, a user might choose to only mint 60-80 DSC. This 20-40 DSC difference acts as a buffer to absorb potential price drops in Ether without immediately risking liquidation. The ideal buffer size depends on the volatility of the collateral asset and the user's risk tolerance."}),"\n"]}),(0,a.jsx)(n.h4,{id:"protocol-fees-minting-and-redeeming",children:"Protocol Fees (Minting and Redeeming)"}),(0,a.jsx)(n.p,{children:"The protocol currently charges a fee of 1% APR (Annual Percentage Rate) on the outstanding DSC debt. This fee accrues over time while the vault is open."}),(0,a.jsx)(n.p,{children:(0,a.jsx)(n.em,{children:"Example of Fee Calculation"})}),(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"If a user mints 100 DSC and keeps their vault open for one year, they will accrue a fee of 1 DSC (1% of 100 DSC). If they keep it open for 6 months, the fee would be approximately 0.5 DSC (1% / 2). The exact fee calculation considers the time the DSC is outstanding. More detailed information on fee structures can be found in the [Link to Fees Docs Section]."}),"\n"]}),(0,a.jsx)(n.h4,{id:"helper-functions-for-collateral-valuation",children:"Helper Functions for Collateral Valuation"}),(0,a.jsx)(n.p,{children:"The protocol provides helper functions that leverage Chainlink oracles to determine the current USD value of supported collateral assets. These functions can assist users in their pre-calculations and risk assessment. Details on these functions can be found in the [Link to Developer Interface Functions Section]."}),(0,a.jsx)(n.h3,{id:"redeeming-collateral-burning-dsc",children:"Redeeming Collateral (Burning DSC)"}),(0,a.jsxs)(n.p,{children:["The process of redeeming locked collateral involves the user paying back the full amount of DSC they owe to the protocol ",(0,a.jsx)(n.em,{children:"for a specific vault"}),"."]}),(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["(",(0,a.jsx)(n.em,{children:"While a user can repay a portion of their debt for a vault at any time, the withdrawal of the backing collateral will only be possible once all the DSC debt associated with that particular vault has been repaid in full."}),")"]}),"\n"]}),(0,a.jsx)(n.p,{children:"Upon full repayment of the DSC debt for a vault, that amount of DSC is burned, permanently reducing the total supply. The user then receives the collateral they initially deposited into that specific vault back, minus any accrued protocol fees."}),(0,a.jsx)(n.h4,{id:"key-aspects-of-redeeming",children:"Key aspects of redeeming"}),(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"DSCEngine Control"}),(0,a.jsxs)(n.p,{children:["Similar to minting, the ",(0,a.jsx)(n.code,{children:"DSCEngine"})," contract manages the burning of DSC and the return of collateral. Users interact with wrapper functions within the ",(0,a.jsx)(n.code,{children:"DSCEngine"})," ([Link to Minting and Burning Interface Functions Section])."]})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"Full DSC Repayment"}),(0,a.jsx)(n.p,{children:"Users must repay the entire outstanding DSC amount associated with their vault to unlock and withdraw their collateral."})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"Fee Deduction"}),(0,a.jsx)(n.p,{children:"Unlike some other protocols (e.g., MakerDAO, where fees are paid in DAI), the fees in this protocol are deducted from the collateral being returned to the user."})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"Partial or Full Repayment"}),(0,a.jsx)(n.p,{children:"Users have the flexibility to burn a portion or all of the DSC they have minted against a specific vault. Burning DSC never negatively impacts the health factor of a vault; it only improves it by reducing the outstanding debt."})]}),"\n"]}),"\n"]})]}),(0,a.jsxs)(o.A,{value:"ui-ux-functions",label:"UI/UX User Functions",children:[(0,a.jsx)(n.h2,{id:"user-interface-functions-minting-and-redeeming-dsc",children:"User Interface Functions: Minting and Redeeming DSC"}),(0,a.jsxs)(n.p,{children:["This section outlines the primary functions within the ",(0,a.jsx)(n.code,{children:"DSCEngine"})," contract that users can directly interact with to mint and redeem DSC."]}),(0,a.jsx)(n.h3,{id:"minting-functions",children:"Minting Functions"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-solidity",children:"    /**\n     * @notice Mints DSC against a specified amount of collateral.\n     * @dev Allows users to lock existing deposited collateral and mint DSC.\n     * @param collId The ID of the collateral token.\n     * @param collAmt The amount of deposited collateral to lock.\n     * @param dscAmt The amount of DSC to mint against the locked collateral.\n     */\n    function mintDSC(bytes32 collId, uint256 collAmt, uint256 dscAmt) external;\n\n    /*//////////////////////////////////////////////////////////////\n                        OTHER MINTING FUNCTIONS\n    //////////////////////////////////////////////////////////////*/\n    /// The following functions also result in the minting of DSC and are further\n    /// detailed within the Collateral Mechanism Docs Section:\n    \n    function depositCollateralAndMintDSC(bytes32 collId, uint256 collAmt, uint256 dscAmt) external;\n\n    function depositEtherCollateralAndMintDSC(uint256 dscAmt) external payable;\n\n    function expandETHVault(uint256 dscAmt) external payable;\n\n    function expandVault(bytes32 collId, uint256 collAmt, uint256 dscAmt) external;\n\n"})}),(0,a.jsx)(n.h3,{id:"redeemingburning-functions",children:"Redeeming/Burning Functions"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-solidity",children:"    /**\n     * @notice Burns a specified amount of DSC from the user's vault.\n     * @dev Decreases the DSC debt associated with the user's vault.\n     *  Fees are also settled prior to reducing the debt.\n     * @param collId The ID of the collateral token.\n     * @param dscAmt The amount of DSC to burn.\n     */\n    function burnDSC(bytes32 collId, uint256 dscAmt) external;\n\n    /*//////////////////////////////////////////////////////////////\n                   OTHER REDEEMING-RELATED FUNCTIONS\n    //////////////////////////////////////////////////////////////*/\n    /// The following function also results in the burning of DSC and is further detailed\n    /// within the Collateral Mechanism Docs Section:\n\n    function redeemCollateralForDSC(bytes32 collId, uint256 collAmt, uint256 dscAmt) external;\n\n"})})]})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},9329:(e,n,t)=>{t.d(n,{A:()=>r});t(6540);var i=t(4164);const a={tabItem:"tabItem_Ymn6"};var l=t(4848);function r(e){let{children:n,hidden:t,className:r}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,i.A)(a.tabItem,r),hidden:t,children:n})}}}]);